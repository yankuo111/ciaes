!function(){var e=document.createElement("style");e.innerHTML=".nav[data-v-da500544]{position:fixed;top:0;left:0;width:100%;z-index:10;background-color:#fff}.nav[data-v-da500544] .van-search__action{line-height:normal}.nav .search-btn[data-v-da500544]{width:70px}.list-contaner[data-v-da500544]{margin-top:10px}.history-search[data-v-da500544]{line-height:inherit}.history-search .history-title[data-v-da500544]{padding:15px 15px 10px;font-size:16px;color:#000;font-weight:800}.history-search .history-item[data-v-da500544]{padding:0 5px 10px 15px}.history-search .history-item .tag[data-v-da500544]{display:inline-block;font-size:12px;padding:5px 10px;border-radius:15px;background-color:#e5e2e2;margin:0 5px 5px 0}[data-v-da500544] .van-cell__title{color:#1996fc}\n",document.head.appendChild(e),System.register(["./index-legacy.77e40bdf.js","./index-legacy.f25f109a.js","./index-legacy.c9537be7.js","./index-legacy.1dcd6f78.js","./index-legacy.e4e3e25f.js","./index-legacy.4901e97e.js","./index-legacy.65023b5e.js","./index-legacy.d4928f20.js","./index-legacy.2077b455.js","./function-call-legacy.b5fdba06.js","./index-legacy.3f603159.js"],(function(e){"use strict";var a,i,t,n,o,s,l,c,d,r,h,g,f,u,y,p,x,m,v,S,k,w,b,_,C,j,L,H,I,P;return{setters:[function(e){a=e._,i=e.s,t=e.e,n=e.r,o=e.o,s=e.l,l=e.q,c=e.H,d=e.T,r=e.y,h=e.A,g=e.I,f=e.F,u=e.E,y=e.G,p=e.x,x=e.D,m=e.B,v=e.Q,S=e.L,k=e.p,w=e.m},function(){},function(e){b=e.I},function(e){_=e.s},function(){},function(e){C=e.B},function(e){j=e.S,L=e.E},function(e){H=e.C},function(e){I=e.L},function(e){P=e.s},function(){}],execute:function(){const q=e=>(k("data-v-da500544"),e=e(),w(),e),z={class:"nav"},$=q((()=>l("div",{style:{height:"54px"}},null,-1))),F={class:"history-search"},N={class:"history-title flex flex_center flex_between"},Y=q((()=>l("span",null,"历史搜索",-1))),B={class:"history-item"},E=["onClick"],M={class:"list-contaner"},T={key:0,class:"chat-empty"};e("default",a(i({__name:"fileSearch",setup(e){v();const{appContext:a}=S(),i=a.config.globalProperties,k=t({search:"",knowledgeList:[],historySearch:[],isShowHistoy:!0,finished:!1,loading:!1,currentPage:1}),w=n(""),q=i.$common.DateFormat;let V=localStorage.getItem("fileSearch");V&&(k.historySearch=JSON.parse(V));const D=()=>{k.search&&(k.loading=!0,k.historySearch.unshift(k.search),k.historySearch=[...new Set(k.historySearch)],localStorage.setItem("fileSearch",JSON.stringify(k.historySearch)),i.axios.post(i.$api.searchKnowledgeFile,{query:k.search,page:k.currentPage,knowledgeId:i.$route.query.id||""}).then((e=>{const{data:a,code:i,msg:t}=e.data;0==i?(a.currentPage===a.totalPage?k.finished=!0:k.currentPage++,k.knowledgeList=a.data||[]):_(t)})).finally((()=>{k.isShowHistoy=!1,k.loading=!1})))},J=()=>{k.isShowHistoy=!0,k.knowledgeList=[],k.currentPage=1,k.finished=!1},O=e=>{e||J()};return(e,a)=>{const t=C,n=j,v=b,S=L,_=H,V=I;return o(),s("div",null,[l("div",z,[c(n,{modelValue:k.search,"onUpdate:modelValue":[a[0]||(a[0]=e=>k.search=e),O],onSearch:D,"show-action":"",shape:"round",onClear:J,placeholder:"搜索文件",ref_key:"vanSearchComponent",ref:w},{action:d((()=>[c(t,{class:"search-btn",disabled:!k.search,loading:!1,onClick:D,round:"",type:"success",size:"small","loading-text":"搜索"},{default:d((()=>[r("搜索")])),_:1},8,["disabled"])])),_:1},8,["modelValue"])]),$,h(l("div",F,[l("div",N,[Y,c(v,{name:"delete-o",color:"#a9a6a6",class:"search-icon",onClick:a[1]||(a[1]=a=>(e.index,void P({title:"温馨提示",confirmButtonColor:"#22ad72",message:"确认删除搜索记录么？"}).then((()=>{k.historySearch=[],localStorage.removeItem("historySearch")})).catch((()=>{}))))})]),l("div",B,[(o(!0),s(f,null,u(k.historySearch,((e,a)=>(o(),s("span",{class:"tag",key:a,onClick:a=>(e=>{k.search=e,D()})(e)},y(e),9,E)))),128))])],512),[[g,k.isShowHistoy]]),h(l("div",M,[0===k.knowledgeList.length?(o(),s("div",T,[c(S,{"image-size":"150",description:"没有找到相关的文件记录"})])):p("",!0),0!==k.knowledgeList.length?(o(),x(V,{key:1,loading:k.loading,"onUpdate:loading":a[2]||(a[2]=e=>k.loading=e),finished:k.finished,"finished-text":"没有更多了",onLoad:D},{default:d((()=>[l("div",null,[(o(!0),s(f,null,u(k.knowledgeList,((e,a)=>(o(),x(_,{class:"van-clearfix",key:e._id,title:e.sourceFile.fileName,label:m(q)("YYYY-mm-dd HH:MM:SS",e.createTime),onClick:a=>(e=>{i.$router.push({path:"/v2/knowledge/details",query:{knowledgeId:i.$route.query.id,fileId:e._id,name:e.policyName}})})(e),icon:"description"},null,8,["title","label","onClick"])))),128))])])),_:1},8,["loading","finished"])):p("",!0)],512),[[g,!k.isShowHistoy]])])}}}),[["__scopeId","data-v-da500544"]]))}}}))}();
