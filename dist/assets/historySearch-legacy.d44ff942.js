!function(){var e=document.createElement("style");e.innerHTML=".nav[data-v-68210cf1]{position:fixed;top:0;left:0;width:100%;z-index:10;background-color:#fff}.nav[data-v-68210cf1] .van-search__action{line-height:normal}.nav .search-btn[data-v-68210cf1]{width:70px}.list-contaner[data-v-68210cf1]{margin-top:10px}.history-search[data-v-68210cf1]{line-height:inherit}.history-search .history-title[data-v-68210cf1]{padding:15px 15px 10px;font-size:16px;color:#000;font-weight:800}.history-search .history-item[data-v-68210cf1]{padding:0 5px 10px 15px}.history-search .history-item .tag[data-v-68210cf1]{display:inline-block;font-size:12px;padding:5px 10px;border-radius:15px;background-color:#e5e2e2;margin:0 5px 5px 0}\n",document.head.appendChild(e),System.register(["./index-legacy.77e40bdf.js","./index-legacy.c9537be7.js","./index-legacy.1dcd6f78.js","./index-legacy.e4e3e25f.js","./index-legacy.4901e97e.js","./index-legacy.65023b5e.js","./index-legacy.d4928f20.js","./function-call-legacy.b5fdba06.js","./index-legacy.3f603159.js"],(function(e){"use strict";var t,s,i,a,o,n,c,r,l,h,d,y,f,p,u,x,g,v,m,S,b,k,C,_,w,j,I,H;return{setters:[function(e){t=e._,s=e.s,i=e.e,a=e.r,o=e.o,n=e.l,c=e.q,r=e.H,l=e.T,h=e.y,d=e.A,y=e.I,f=e.F,p=e.E,u=e.G,x=e.x,g=e.D,v=e.Q,m=e.L,S=e.p,b=e.m},function(e){k=e.I},function(e){C=e.s},function(){},function(e){_=e.B},function(e){w=e.S,j=e.E},function(e){I=e.C},function(e){H=e.s},function(){}],execute:function(){const L=e=>(S("data-v-68210cf1"),e=e(),b(),e),z={class:"nav"},q=L((()=>c("div",{style:{height:"54px"}},null,-1))),E={class:"history-search"},N={class:"history-title flex flex_center flex_between"},T=L((()=>c("span",null,"历史搜索",-1))),V={class:"history-item"},B=["onClick"],J={class:"list-contaner"},O={key:0,class:"chat-empty"};e("default",t(s({__name:"historySearch",setup(e){let t=v();const{appContext:s}=m(),S=s.config.globalProperties,b=i({search:"",historyList:[],historySearch:[],isShowHistoy:!0}),L=a("");let A=localStorage.getItem("historySearch");A&&(b.historySearch=JSON.parse(A));const D=()=>{b.search&&(b.historySearch.unshift(b.search),b.historySearch=[...new Set(b.historySearch)],localStorage.setItem("historySearch",JSON.stringify(b.historySearch)),S.axios.post(S.$api.searchSession,{query:b.search}).then((e=>{const{data:t,code:s,msg:i}=e.data;0==s?b.historyList=t||[]:C(i)})).finally((()=>{b.isShowHistoy=!1})))},F=()=>{b.isShowHistoy=!0,b.historyList=[]},G=e=>{e||F()};return(e,s)=>{const i=_,a=w,v=k,m=j,S=I;return o(),n(f,null,[c("div",z,[r(a,{modelValue:b.search,"onUpdate:modelValue":[s[0]||(s[0]=e=>b.search=e),G],onSearch:D,"show-action":"",shape:"round",onClear:F,placeholder:"搜索聊天记录",ref_key:"vanSearchComponent",ref:L},{action:l((()=>[r(i,{class:"search-btn",disabled:!b.search,loading:!1,onClick:D,round:"",type:"success",size:"small","loading-text":"搜索"},{default:l((()=>[h("搜索")])),_:1},8,["disabled"])])),_:1},8,["modelValue"])]),q,d(c("div",E,[c("div",N,[T,r(v,{name:"delete-o",color:"#a9a6a6",class:"search-icon",onClick:s[1]||(s[1]=t=>(e.index,void H({title:"温馨提示",confirmButtonColor:"#22ad72",message:"确认删除搜索记录么？"}).then((()=>{b.historySearch=[],localStorage.removeItem("historySearch")})).catch((()=>{}))))})]),c("div",V,[(o(!0),n(f,null,p(b.historySearch,((e,t)=>(o(),n("span",{class:"tag",key:t,onClick:t=>(e=>{b.search=e,D()})(e)},u(e),9,B)))),128))])],512),[[y,b.isShowHistoy]]),d(c("div",J,[0===b.historyList.length?(o(),n("div",O,[r(m,{"image-size":"150",description:"没有找到相关的聊天记录"})])):x("",!0),(o(!0),n(f,null,p(b.historyList,((e,s)=>(o(),g(S,{key:e.saveTime,title:e.sessionName,onClick:s=>{var i;(i=e.sessionId)?t.push({path:"/h5/v2/index",query:{sessionId:i}}):t.push("/h5/v2/index")},icon:"chat-o","is-link":""},null,8,["title","onClick"])))),128))],512),[[y,!b.isShowHistoy]])],64)}}}),[["__scopeId","data-v-68210cf1"]]))}}}))}();
