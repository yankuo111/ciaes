!function(){var e=document.createElement("style");e.innerHTML='@charset "UTF-8";.nav[data-v-79f22f0d]{position:fixed;top:0;left:0;width:100%;z-index:10;background-color:#fff}.nav[data-v-79f22f0d] .van-search__action{line-height:normal}.list-contaner[data-v-79f22f0d]{margin-top:10px}.list-contaner .search-icon[data-v-79f22f0d]{font-size:16px;line-height:inherit}.page_bottom[data-v-79f22f0d]{position:fixed;bottom:0;left:0;width:100%;height:50px;background:#22ad72;color:#fff;font-size:18px;border-top-left-radius:4px;border-top-right-radius:4px;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}.page_bottom span[data-v-79f22f0d]{margin-left:10px}[data-v-79f22f0d] .van-list{padding-bottom:70px}\n',document.head.appendChild(e),System.register(["./index-legacy.77e40bdf.js","./index-legacy.1dcd6f78.js","./index-legacy.f25f109a.js","./index-legacy.c9537be7.js","./index-legacy.e4e3e25f.js","./function-call-legacy.b5fdba06.js","./index-legacy.65023b5e.js","./index-legacy.d4928f20.js","./index-legacy.2077b455.js","./index-legacy.4901e97e.js","./index-legacy.3f603159.js"],(function(e){"use strict";var t,n,i,a,o,s,d,l,c,r,f,h,u,g,p,m,x,v,y,b,C,L,j;return{setters:[function(e){t=e._,n=e.s,i=e.e,a=e.o,o=e.l,s=e.q,d=e.H,l=e.D,c=e.T,r=e.F,f=e.E,h=e.a1,u=e.Q,g=e.L,p=e.p,m=e.m},function(e){x=e.s},function(){},function(e){v=e.I},function(){},function(e){y=e.s},function(e){b=e.S,C=e.E},function(e){L=e.C},function(e){j=e.L},function(){},function(){}],execute:function(){const _={class:"nav"},k=(e=>(p("data-v-79f22f0d"),e=e(),m(),e))((()=>s("div",{style:{height:"54px"}},null,-1))),P={class:"list-contaner"};e("default",t(n({__name:"history",setup(e){let t=u();const{appContext:n}=g(),p=n.config.globalProperties,m=i({search:"",loading:!1,finished:!1,historyList:[],totalCount:1,currentPage:1}),I=()=>{t.push("/h5/v2/historySearch")},z=()=>{m.loading=!0;let e={page:m.currentPage};return new Promise(((n,i)=>{p.axios.post(p.$api.sessionList,e).then((e=>{const{data:a,code:o,msg:s}=e.data;0==o?(a.currentPage===a.totalPage?m.finished=!0:m.currentPage++,m.historyList=m.historyList.concat(a.data),m.totalCount=a.totalCount,n(!0)):(m.totalCount=0,x(s),t.replace("/v2/login"),i()),m.loading=!1}))}))};z();const S=e=>{y({title:"温馨提示",confirmButtonColor:"#22ad72",message:"确认删除本条记录么？"}).then((()=>{(e=>{let t={sessionId:m.historyList[e].sessionId};p.axios.post(p.$api.delSession,t).then((t=>{const{code:n,msg:i}=t.data;0==n?(x("删除成功"),m.historyList.splice(e,1)):x(i),m.loading=!1}))})(e)})).catch((()=>{}))};return(e,n)=>{const i=b,u=v,g=L,p=j,x=C;return a(),o("div",null,[s("div",_,[d(i,{modelValue:m.search,"onUpdate:modelValue":n[0]||(n[0]=e=>m.search=e),disabled:"",onClick:I,shape:"round",placeholder:"搜索聊天记录"},null,8,["modelValue"])]),k,s("div",P,[0!==m.historyList.length?(a(),l(p,{key:0,loading:m.loading,"onUpdate:loading":n[1]||(n[1]=e=>m.loading=e),finished:m.finished,"finished-text":"没有更多了",onLoad:z},{default:c((()=>[(a(!0),o(r,null,f(m.historyList,((e,n)=>(a(),l(g,{key:e.saveTime,title:e.sessionName,onClick:n=>{var i;(i=e.sessionId)?t.push({path:"/h5/v2/chat",query:{sessionId:i}}):t.push("/h5/v2/index")},icon:"chat-o"},{"right-icon":c((()=>[d(u,{name:"delete-o",color:"#a9a6a6",class:"search-icon",onClick:h((e=>S(n)),["stop"])},null,8,["onClick"])])),_:2},1032,["title","onClick"])))),128))])),_:1},8,["loading","finished"])):(a(),l(x,{key:1,"image-size":"150",description:"没有保存聊天记录"}))])])}}}),[["__scopeId","data-v-79f22f0d"]]))}}}))}();
