import{_ as C,s as w,e as F,o as l,l as g,q as r,H as y,D as p,T as E,F as x,E as L,B as D,Q as B,L as I,p as P,m as S}from"./index.8c5864de.js";import{s as $}from"./index.d6bd2086.js";/* empty css              */import"./index.72a4dedb.js";import"./index.6925981e.js";import{S as b,E as q}from"./index.dac30710.js";import{C as V}from"./index.8ebbac1f.js";import{L as A}from"./index.8f4b3c75.js";import"./index.5ec7378f.js";const N=i=>(P("data-v-b2c3a8dc"),i=i(),S(),i),Y={class:"nav"},H=N(()=>r("div",{style:{height:"54px"}},null,-1)),T={class:"list-contaner"},G=w({__name:"knowledgeDetails",setup(i){let _=B();const{appContext:h}=I(),o=h.config.globalProperties,f=o.$common.DateFormat,e=F({search:"",loading:!1,finished:!1,knowledgeList:[],totalCount:1,currentPage:1}),v=()=>{_.push({path:"/h5/v2/file/search",query:{id:o.$route.query.id||""}})},m=()=>{e.loading=!0;let s={page:e.currentPage,knowledgeId:o.$route.query.id||""};return new Promise((a,d)=>{o.axios.post(o.$api.listKnowledgeFile,s).then(u=>{const{data:n,code:c,msg:t}=u.data;c==0?(n.currentPage===n.totalPage?e.finished=!0:e.currentPage++,e.knowledgeList=e.knowledgeList.concat(n.data),e.totalCount=n.totalCount,a(!0)):(e.totalCount=0,$(t),_.replace("/v2/login"),d())}).finally(()=>{e.loading=!1})})};m();const k=s=>{o.$router.push({path:"/v2/knowledge/details",query:{knowledgeId:o.$route.query.id,fileId:s._id,name:s.policyName}})};return(s,a)=>{const d=b,u=V,n=A,c=q;return l(),g("div",null,[r("div",Y,[y(d,{modelValue:e.search,"onUpdate:modelValue":a[0]||(a[0]=t=>e.search=t),disabled:"",onClick:v,shape:"round",placeholder:"\u641C\u7D22\u6587\u4EF6"},null,8,["modelValue"])]),H,r("div",T,[e.knowledgeList.length!==0?(l(),p(n,{key:0,loading:e.loading,"onUpdate:loading":a[1]||(a[1]=t=>e.loading=t),finished:e.finished,"finished-text":"\u6CA1\u6709\u66F4\u591A\u4E86",onLoad:m},{default:E(()=>[r("div",null,[(l(!0),g(x,null,L(e.knowledgeList,(t,K)=>(l(),p(u,{class:"van-clearfix",key:t._id,title:t.sourceFile.fileName,label:D(f)("YYYY-mm-dd HH:MM:SS",t.createTime),onClick:M=>k(t),icon:"description"},null,8,["title","label","onClick"]))),128))])]),_:1},8,["loading","finished"])):(l(),p(c,{key:1,"image-size":"150",description:"\u77E5\u8BC6\u5E93\u6682\u65E0\u6587\u4EF6\uFF0C\u8BF7\u8F6C\u79FB\u81F3PC\u7AEF\u4E0A\u4F20\u3002"}))])])}}});var Z=C(G,[["__scopeId","data-v-b2c3a8dc"]]);export{Z as default};
