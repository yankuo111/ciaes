!function(){var e=document.createElement("style");e.innerHTML=".knowledge .search-input[data-v-2461d60f]{width:300px;margin-right:20px}.knowledge .header[data-v-2461d60f]{margin-bottom:10px;padding:10px 0 20px;border-bottom:1px solid #f0f0f0}.knowledge .content[data-v-2461d60f]{padding-top:30px;min-height:500px}.knowledge .content .content-item[data-v-2461d60f]{cursor:pointer}.knowledge .content .desc[data-v-2461d60f]{color:#999;margin-top:3px}.knowledge .content .paganition[data-v-2461d60f]{transform:translate(-80px)}.knowledge .content .flag[data-v-2461d60f]{width:50px;height:28px;position:absolute;top:26px;right:-14px}.knowledge .content .flag .icon[data-v-2461d60f]{width:100%;height:100%}.knowledge .content .flag span[data-v-2461d60f]{position:absolute;top:5px;left:0;text-align:center;font-size:12px;color:#fff;display:inline-block;width:100%;transform:scale(.7)}.knowledge[data-v-2461d60f] .el-card{overflow:hidden}.knowledge[data-v-2461d60f] .el-card__body:hover{background-color:#f3f4f6}.knowledge .default-primary[data-v-2461d60f]{background:#12aa7e;border:none}.knowledge .default-primary[data-v-2461d60f]:hover{opacity:.8}.knowledge .default-primary-plain[data-v-2461d60f]{border:solid 1px #f1f5f4}.knowledge .default-primary-plain[data-v-2461d60f]:hover{background:#f1f5f4;color:#12aa7e}.knowledge[data-v-2461d60f] .el-input__wrapper.is-focus{box-shadow:0 0 0 1px #12aa7e inset!important}[data-v-2461d60f] .el-pagination li.is-active{background:#12aa7e}[data-v-2461d60f] .el-pagination li:hover{color:#12aa7e}\n",document.head.appendChild(e),System.register(["./index-legacy.77e40bdf.js"],(function(e){"use strict";var a,l,t,n,o,d,i,c,s,r,u,p,f,g,v,m,h,k,w,y,x,b,_,C,Y,T;return{setters:[function(e){a=e._,l=e.s,t=e.r,n=e.z,o=e.o,d=e.l,i=e.q,c=e.H,s=e.T,r=e.B,u=e.U,p=e.y,f=e.V,g=e.W,v=e.X,m=e.x,h=e.A,k=e.F,w=e.E,y=e.D,x=e.G,b=e.L,_=e.Q,C=e.v,Y=e.N,T=e.Y}],execute:function(){const M={class:"knowledge"},V={class:"header flex flex_between"},$={key:0},q={class:"content"},H={class:"flex"},N={class:"flex_1"},S={class:"desc"},A={class:"flag"},I={class:"flex_1",style:{"margin-left":"50px"}},P={class:"desc"},U={class:"flag"};e("default",a(l({__name:"knowledge",setup(e){const{appContext:a}=b(),l=a.config.globalProperties,j=t(""),z=_(),D=t(1),E=t([]),F=t([]),K=l.$common.DateFormat,L=t(0),B=t(!1),G=t(!1),Q=t(n.state.role),W=()=>(B.value=!0,G.value=!1,new Promise(((e,a)=>{l.axios.post(l.$api.listKnowledgeTable,{page:D.value}).then((e=>{const{data:a,code:t,msg:n}=e.data;if(0==t&&a.data.length>0){let e=Math.ceil(a.data.length/2);E.value=a.data.slice(0,e),F.value=a.data.slice(e),L.value=a.totalCount}else l.$message.error(n)})).finally((()=>{B.value=!1}))})));W();const X=()=>(B.value=!0,new Promise(((e,a)=>{l.axios.post(l.$api.searchKnowledgeTable,{page:D.value,query:j.value}).then((e=>{const{data:a,code:t,msg:n}=e.data;if(0==t){let e=Math.ceil(a.data.length/2);E.value=a.data.slice(0,e),F.value=a.data.slice(e),L.value=a.totalCount}else l.$message.error(n)})).finally((()=>{B.value=!1}))}))),J=()=>{j.value&&(E.value=[],F.value=[],L.value=0,D.value=1,G.value=!0,X())},O=e=>{console.log(e),D.value=e,G.value?X():W()},R=e=>{"Admin"===n.state.user.role?l.$router.push({path:"/v2/knowledge/upload",query:{id:e.uniqueId,name:e.knowledgeName,type:e.type}}):l.$router.push({path:"/v2/knowledge/check",query:{id:e.uniqueId,name:e.knowledgeName,type:e.type}})};return(e,a)=>{const l=C("el-icon"),t=C("el-input"),n=C("el-button"),b=Y,_=C("el-card"),G=C("el-timeline-item"),X=C("el-timeline"),Z=C("el-pagination"),ee=C("el-empty"),ae=T("loading");return o(),d("div",M,[i("div",V,[i("div",null,[c(t,{modelValue:j.value,"onUpdate:modelValue":a[0]||(a[0]=e=>j.value=e),class:"search-input",clearable:"",placeholder:"知识库搜索"},{prefix:s((()=>[c(l,{class:"el-input__icon"},{default:s((()=>[c(r(u))])),_:1})])),_:1},8,["modelValue"]),c(n,{class:"default-primary",type:"primary",icon:r(f),onClick:J},{default:s((()=>[p("搜索")])),_:1},8,["icon"]),c(n,{class:"default-primary-plain",icon:r(g),onClick:W},{default:s((()=>[p("重制")])),_:1},8,["icon"])]),"Admin"===Q.value?(o(),d("div",$,[c(n,{class:"default-primary",type:"primary",onClick:a[1]||(a[1]=e=>r(z).push({path:"/v2/knowledge/new"})),icon:r(v)},{default:s((()=>[p("新建")])),_:1},8,["icon"])])):m("",!0)]),h((o(),d("div",q,[i("div",H,[i("div",N,[c(X,null,{default:s((()=>[(o(!0),d(k,null,w(E.value,((e,a)=>(o(),y(G,{key:e.createTime,timestamp:r(K)("YYYY-mm-dd HH:MM:SS",e.createTime),color:"#0bbd87",placement:"top"},{default:s((()=>[c(_,{class:"content-item",onClick:a=>R(e)},{default:s((()=>[i("h4",null,x(e.knowledgeName),1),i("p",S,x(e.desc),1),i("div",A,[c(b,{"icon-class":"flag",color:"public"===e.type?"#409eff":"#65ba95",class:"icon"},null,8,["color"]),i("span",null,x("public"===e.type?"公开":"私有"),1)])])),_:2},1032,["onClick"])])),_:2},1032,["timestamp"])))),128))])),_:1})]),i("div",I,[c(X,null,{default:s((()=>[(o(!0),d(k,null,w(F.value,((e,a)=>(o(),y(G,{key:e.createTime,timestamp:r(K)("YYYY-mm-dd HH:MM:SS",e.createTime),color:"#0bbd87",placement:"top"},{default:s((()=>[c(_,{class:"content-item",onClick:a=>R(e)},{default:s((()=>[i("h4",null,x(e.knowledgeName),1),i("p",P,x(e.desc),1),i("div",U,[c(b,{"icon-class":"flag",color:"public"===e.type?"#409eff":"#65ba95",class:"icon"},null,8,["color"]),i("span",null,x("public"===e.type?"公开":"私有"),1)])])),_:2},1032,["onClick"])])),_:2},1032,["timestamp"])))),128))])),_:1})])]),c(Z,{modelValue:D.value,"onUpdate:modelValue":a[2]||(a[2]=e=>D.value=e),class:"pagination flex_just",background:"",layout:"total,prev, pager, next",total:L.value,onCurrentChange:O,"hide-on-single-page":""},null,8,["modelValue","total"]),0===E.value.length?(o(),y(ee,{key:0,description:"暂无知识库数据"})):m("",!0)])),[[ae,B.value]])])}}}),[["__scopeId","data-v-2461d60f"]]))}}}))}();
