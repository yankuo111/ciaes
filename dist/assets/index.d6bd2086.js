import{ab as le,w as O,H as c,s as _,c as K,r as y,a8 as U,a9 as ce,ae as X,A as V,I as F,f as ie,ad as G,a7 as re,aa as ue,af as de,F as fe,ac as $,ag as ve,ah as ye,e as me,L as he}from"./index.8c5864de.js";import{a as ge,b as Ce,c as D,e as p,g as ke,n as k,m as w,d as Se,w as N,t as x,u as L,f as we,i as R,h as Oe,I as Z,p as Ie,j as be,k as xe,l as pe}from"./index.72a4dedb.js";import{o as Pe,g as ze,p as q,u as W,a as J,H as Te}from"./index.6925981e.js";function Be(e,{args:t=[],done:n,canceled:s}){if(e){const o=e.apply(null,t);ge(o)?o.then(a=>{a?n():s&&s()}).catch(Ce):o?n():s&&s()}else n()}const Q=Symbol();function dt(e){const t=le(Q,null);t&&O(t,n=>{n&&e()})}const[Ae,T]=D("loading"),Le=Array(12).fill(null).map((e,t)=>c("i",{class:T("line",String(t+1))},null)),_e=c("svg",{class:T("circular"),viewBox:"25 25 50 50"},[c("circle",{cx:"50",cy:"50",r:"20",fill:"none"},null)]),De={size:k,type:w("circular"),color:String,vertical:Boolean,textSize:k,textColor:String};var Ee=_({name:Ae,props:De,setup(e,{slots:t}){const n=K(()=>p({color:e.color},ke(e.size))),s=()=>{const a=e.type==="spinner"?Le:_e;return c("span",{class:T("spinner",e.type),style:n.value},[t.icon?t.icon():a])},o=()=>{var a;if(t.default)return c("span",{class:T("text"),style:{fontSize:Se(e.textSize),color:(a=e.textColor)!=null?a:e.color}},[t.default()])};return()=>{const{type:a,vertical:l}=e;return c("div",{class:T([a,{vertical:l}]),"aria-live":"polite","aria-busy":!0},[s(),o()])}}});const $e=N(Ee),ee={show:Boolean,zIndex:k,overlay:x,duration:k,teleport:[String,Object],lockScroll:x,lazyRender:x,beforeClose:Function,overlayStyle:Object,overlayClass:L,transitionAppear:Boolean,closeOnClickOverlay:x},ft=Object.keys(ee);function Ne(e,t){return e>t?"horizontal":t>e?"vertical":""}function Re(){const e=y(0),t=y(0),n=y(0),s=y(0),o=y(0),a=y(0),l=y(""),d=()=>l.value==="vertical",h=()=>l.value==="horizontal",f=()=>{n.value=0,s.value=0,o.value=0,a.value=0,l.value=""};return{move:i=>{const v=i.touches[0];n.value=(v.clientX<0?0:v.clientX)-e.value,s.value=v.clientY-t.value,o.value=Math.abs(n.value),a.value=Math.abs(s.value);const g=10;(!l.value||o.value<g&&a.value<g)&&(l.value=Ne(o.value,a.value))},start:i=>{f(),e.value=i.touches[0].clientX,t.value=i.touches[0].clientY},reset:f,startX:e,startY:t,deltaX:n,deltaY:s,offsetX:o,offsetY:a,direction:l,isVertical:d,isHorizontal:h}}let P=0;const j="van-overflow-hidden";function Me(e,t){const n=Re(),s="01",o="10",a=m=>{n.move(m);const r=n.deltaY.value>0?o:s,i=ze(m.target,e.value),{scrollHeight:v,offsetHeight:g,scrollTop:I}=i;let S="11";I===0?S=g>=v?"00":"01":I+g>=v&&(S="10"),S!=="11"&&n.isVertical()&&!(parseInt(S,2)&parseInt(r,2))&&q(m,!0)},l=()=>{document.addEventListener("touchstart",n.start),document.addEventListener("touchmove",a,{passive:!1}),P||document.body.classList.add(j),P++},d=()=>{P&&(document.removeEventListener("touchstart",n.start),document.removeEventListener("touchmove",a),P--,P||document.body.classList.remove(j))},h=()=>t()&&l(),f=()=>t()&&d();Pe(h),U(f),ce(f),O(t,m=>{m?l():d()})}function te(e){const t=y(!1);return O(e,n=>{n&&(t.value=n)},{immediate:!0}),n=>()=>t.value?n():null}const[je,Ye]=D("overlay"),He={show:Boolean,zIndex:k,duration:k,className:L,lockScroll:x,lazyRender:x,customStyle:Object};var Ke=_({name:je,props:He,setup(e,{slots:t}){const n=y(),s=te(()=>e.show||!e.lazyRender),o=l=>{e.lockScroll&&q(l,!0)},a=s(()=>{var l;const d=p(we(e.zIndex),e.customStyle);return R(e.duration)&&(d.animationDuration=`${e.duration}s`),V(c("div",{ref:n,style:d,class:[Ye(),e.className]},[(l=t.default)==null?void 0:l.call(t)]),[[F,e.show]])});return W("touchmove",o,{target:n}),()=>c(X,{name:"van-fade",appear:!0},{default:a})}});const Ue=N(Ke),Xe=p({},ee,{round:Boolean,position:w("center"),closeIcon:w("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:w("top-right"),safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[Ve,Y]=D("popup");var Fe=_({name:Ve,inheritAttrs:!1,props:Xe,emits:["open","close","opened","closed","keydown","update:show","clickOverlay","clickCloseIcon"],setup(e,{emit:t,attrs:n,slots:s}){let o,a;const l=y(),d=y(),h=te(()=>e.show||!e.lazyRender),f=K(()=>{const u={zIndex:l.value};if(R(e.duration)){const C=e.position==="center"?"animationDuration":"transitionDuration";u[C]=`${e.duration}s`}return u}),m=()=>{o||(o=!0,l.value=e.zIndex!==void 0?+e.zIndex:Oe(),t("open"))},r=()=>{o&&Be(e.beforeClose,{done(){o=!1,t("close"),t("update:show",!1)}})},i=u=>{t("clickOverlay",u),e.closeOnClickOverlay&&r()},v=()=>{if(e.overlay)return c(Ue,{show:e.show,class:e.overlayClass,zIndex:l.value,duration:e.duration,customStyle:e.overlayStyle,role:e.closeOnClickOverlay?"button":void 0,tabindex:e.closeOnClickOverlay?0:void 0,onClick:i},{default:s["overlay-content"]})},g=u=>{t("clickCloseIcon",u),r()},I=()=>{if(e.closeable)return c(Z,{role:"button",tabindex:0,name:e.closeIcon,class:[Y("close-icon",e.closeIconPosition),Te],classPrefix:e.iconPrefix,onClick:g},null)},S=()=>t("opened"),ne=()=>t("closed"),oe=u=>t("keydown",u),ae=h(()=>{var u;const{round:C,position:B,safeAreaInsetTop:E,safeAreaInsetBottom:se}=e;return V(c("div",$({ref:d,style:f.value,role:"dialog",tabindex:0,class:[Y({round:C,[B]:B}),{"van-safe-area-top":E,"van-safe-area-bottom":se}],onKeydown:oe},n),[(u=s.default)==null?void 0:u.call(s),I()]),[[F,e.show]])}),M=()=>{const{position:u,transition:C,transitionAppear:B}=e,E=u==="center"?"van-fade":`van-popup-slide-${u}`;return c(X,{name:C||E,appear:B,onAfterEnter:S,onAfterLeave:ne},{default:ae})};return O(()=>e.show,u=>{u&&!o&&(m(),n.tabindex===0&&ie(()=>{var C;(C=d.value)==null||C.focus()})),!u&&o&&(o=!1,t("close"))}),J({popupRef:d}),Me(d,()=>e.show&&e.lockScroll),W("popstate",()=>{e.closeOnPopstate&&(r(),a=!1)}),G(()=>{e.show&&m()}),re(()=>{a&&(t("update:show",!0),a=!1)}),U(()=>{e.show&&e.teleport&&(r(),a=!0)}),ue(Q,()=>e.show),()=>e.teleport?c(de,{to:e.teleport},{default:()=>[v(),M()]}):c(fe,null,[v(),M()])}});const Ge=N(Fe);let z=0;function Ze(e){e?(z||document.body.classList.add("van-toast--unclickable"),z++):z&&(z--,z||document.body.classList.remove("van-toast--unclickable"))}const[qe,b]=D("toast"),We=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay"],Je={icon:String,show:Boolean,type:w("text"),overlay:Boolean,message:k,iconSize:k,duration:be(2e3),position:w("middle"),teleport:[String,Object],wordBreak:String,className:L,iconPrefix:String,transition:w("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:L,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean};var Qe=_({name:qe,props:Je,emits:["update:show"],setup(e,{emit:t,slots:n}){let s,o=!1;const a=()=>{const r=e.show&&e.forbidClick;o!==r&&(o=r,Ze(o))},l=r=>t("update:show",r),d=()=>{e.closeOnClick&&l(!1)},h=()=>clearTimeout(s),f=()=>{const{icon:r,type:i,iconSize:v,iconPrefix:g,loadingType:I}=e;if(r||i==="success"||i==="fail")return c(Z,{name:r||i,size:v,class:b("icon"),classPrefix:g},null);if(i==="loading")return c($e,{class:b("loading"),size:v,type:I},null)},m=()=>{const{type:r,message:i}=e;if(n.message)return c("div",{class:b("text")},[n.message()]);if(R(i)&&i!=="")return r==="html"?c("div",{key:0,class:b("text"),innerHTML:String(i)},null):c("div",{class:b("text")},[i])};return O(()=>[e.show,e.forbidClick],a),O(()=>[e.show,e.type,e.message,e.duration],()=>{h(),e.show&&e.duration>0&&(s=setTimeout(()=>{l(!1)},e.duration))}),G(a),ve(a),()=>c(Ge,$({class:[b([e.position,e.wordBreak==="normal"?"break-normal":e.wordBreak,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:d,onClosed:h,"onUpdate:show":l},Ie(e,We)),{default:()=>[f(),m()]})}});function et(){const e=me({show:!1}),t=o=>{e.show=o},n=o=>{p(e,o,{transitionAppear:!0}),t(!0)},s=()=>t(!1);return J({open:n,close:s,toggle:t}),{open:n,close:s,state:e,toggle:t}}function tt(e){const t=ye(e),n=document.createElement("div");return document.body.appendChild(n),{instance:t.mount(n),unmount(){t.unmount(),document.body.removeChild(n)}}}const nt={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let A=[],ot=!1,H=p({},nt);const at=new Map;function st(e){return pe(e)?e:{message:e}}function lt(){const{instance:e,unmount:t}=tt({setup(){const n=y(""),{open:s,state:o,close:a,toggle:l}=et(),d=()=>{},h=()=>c(Qe,$(o,{onClosed:d,"onUpdate:show":l}),null);return O(n,f=>{o.message=f}),he().render=h,{open:s,close:a,message:n}}});return e}function ct(){if(!A.length||ot){const e=lt();A.push(e)}return A[A.length-1]}function vt(e={}){if(!xe)return{};const t=ct(),n=st(e);return t.open(p({},H,at.get(n.type||H.type),n)),t}export{$e as L,Ge as P,ft as a,Be as c,tt as m,dt as o,ee as p,vt as s,et as u};
