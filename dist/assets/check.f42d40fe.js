import{_ as j,s as A,r as o,o as E,l as D,q as a,G as I,x as H,H as t,T as u,B as h,U as M,y as C,V as G,W as U,L as Q,Q as W,v as i,p as z,m as J}from"./index.8c5864de.js";const k=_=>(z("data-v-a1ff86b4"),_=_(),J(),_),O={class:"knowledge"},X={key:0,class:"knowledge-title"},Z=k(()=>a("span",null,"\u77E5\u8BC6\u5E93\u540D\u79F0: ",-1)),ee={class:"header flex flex_between"},te={class:"flex flex_center"},ae={class:"content"},le=k(()=>a("span",null,"\u6682\u65E0\u6570\u636E\uFF0C\u8FD4\u56DE",-1)),oe=k(()=>a("span",null,"\u9009\u62E9",-1)),ne=A({__name:"check",setup(_){const f=o(""),{appContext:$}=Q(),e=$.config.globalProperties,S=W(),d=o(1),v=o([]),V=e.$common.DateFormat,m=o(0),g=o(!1),y=o(!1),b=o(e.$route.query.name||""),q=o(),x=()=>(g.value=!0,y.value=!1,new Promise((l,c)=>{e.axios.post(e.$api.listKnowledgeFile,{page:d.value,knowledgeId:e.$route.query.id||""}).then(p=>{const{data:n,code:r,msg:s}=p.data;r==0?(v.value=n.data,m.value=n.totalCount):e.$message.error(s)}).finally(()=>{g.value=!1})}));x();const F=()=>(g.value=!0,new Promise((l,c)=>{e.axios.post(e.$api.searchKnowledgeFile,{page:d.value,query:f.value,knowledgeId:e.$route.query.id||""}).then(p=>{const{data:n,code:r,msg:s}=p.data;r==0?(v.value=n.data,m.value=n.totalCount):e.$message.error(s)}).finally(()=>{g.value=!1})})),N=()=>{!f.value||(v.value=[],m.value=0,d.value=1,y.value=!0,F())},B=l=>{d.value=l,K()},K=()=>{y.value?F():x()},P=l=>l+1+(d.value-1)*10,R=l=>{let c=e.$router.resolve({path:"/v2/knowledge/details",query:{knowledgeId:e.$route.query.id,fileId:l._id,name:l.policyName}});window.open(c.href,"_bank")},T=()=>{S.push({path:"/v2/knowledge/index"})};return(l,c)=>{const p=i("el-icon"),n=i("el-input"),r=i("el-button"),s=i("el-table-column"),L=i("el-table"),Y=i("el-pagination");return E(),D("div",O,[b.value?(E(),D("div",X,[Z,a("span",null,I(b.value),1)])):H("",!0),a("div",ee,[a("div",te,[a("div",null,[t(n,{modelValue:f.value,"onUpdate:modelValue":c[0]||(c[0]=w=>f.value=w),class:"search-input",placeholder:"\u6587\u4EF6\u641C\u7D22"},{prefix:u(()=>[t(p,{class:"el-input__icon"},{default:u(()=>[t(h(M))]),_:1})]),_:1},8,["modelValue"]),t(r,{class:"default-primary",type:"primary",icon:h(G),onClick:N},{default:u(()=>[C(" \u641C\u7D22")]),_:1},8,["icon"]),t(r,{class:"default-primary-plain",icon:h(U),onClick:x},{default:u(()=>[C("\u91CD\u5236")]),_:1},8,["icon"])])])]),a("div",ae,[t(L,{ref_key:"multipleTableRef",ref:q,"cell-style":{textAlign:"center"},stripe:"",class:"table","header-cell-style":{"text-align":"center"},data:v.value,onRowClick:R},{empty:u(()=>[a("div",null,[le,a("span",{onClick:T,style:{color:"#409eff",cursor:"pointer",margin:"0 2px"}},"\u77E5\u8BC6\u5E93\u5217\u8868"),oe])]),default:u(()=>[t(s,{type:"index",index:P,width:"100",label:"\u5E8F\u53F7"}),t(s,{property:"sourceFile.fileName",label:"\u5236\u5EA6\u540D\u79F0"}),t(s,{label:"\u4E0A\u4F20\u65F6\u95F4"},{default:u(w=>[C(I(h(V)("YYYY-mm-dd HH:MM:SS",w.row.createTime)),1)]),_:1})]),_:1},8,["data"]),t(Y,{class:"pagination flex_just",background:"",layout:"total,prev, pager, next",onCurrentChange:B,"hide-on-single-page":"",total:m.value},null,8,["total"])])])}}});var ue=j(ne,[["__scopeId","data-v-a1ff86b4"]]);export{ue as default};
